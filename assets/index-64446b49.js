(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function l(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(t){if(t.ep)return;t.ep=!0;const n=l(t);fetch(t.href,n)}})();function f(c){let r=new Map;for(let l=0;l<c.length;l++)r.set(c[l],u(c[l]+".txt"));return r}function u(c){var r=new XMLHttpRequest;r.open("GET",c,!1),r.send();for(var l=r.responseText.split(`
`),e=[],t=0;t<l.length;t++){for(var n=l[t].replace(`
`,"").split(";"),i={title:n[0],isSingleAnswerQuestion:n[1]==="true",responses:[]},o=2;o<n.length;o++)i.responses.push(n[o]);e.push(i)}return e}let a=0;function h(c){let r="";console.log(c),r+='<table class="table table-light table-striped"><tbody>',r+='<tr class="form-group"><th class="col-4">Nom du fichier :</th><th class="col-4"><input type="text" id="fileName"></th></tr>',c.forEach(e=>{r+=`<tr class="form-group">
<th class="col-4">${e.title}</th>`,e.responses.forEach(t=>{let n=e.isSingleAnswerQuestion?"radio":"checkbox";r+=`<th class="form-check form-check-inline cel">
<input class="form-check-input" type="${n}" name="${e.title}" id="${e.title}-${t}" value="${t}">
<label class="form-check-label d-block" for="${e.title}-${t}">${t}</label>
</th>`}),r+="</tr>"}),r+="</tbody></table>",r+=`<div class="container text-center mb-5 ">
                    <div class="row justify-content-evenly"> 
                        <button class="col-3 btn btn-primary" id="submitButton">Saisir la prochaine fiche</button>
                        <div class="col">Nombre de saissie actuel :<div id="nbSaissi">0</div></div>
                        <button class="col-3 btn btn-danger" id="finishButton">Générer un tableau Excel</button>
                    </div>
                </div>    `,document.getElementById("body").innerHTML=r;let l={};document.getElementById("submitButton").addEventListener("click",function(){c.forEach(e=>{let t=document.getElementsByName(e.title);t.forEach(n=>{n.checked&&(l[e.title]||(l[e.title]={}),l[e.title][n.value]||(l[e.title][n.value]=0),l[e.title][n.value]++)}),t.forEach(n=>{n.checked=!1})}),document.getElementById("nbSaissi").innerHTML=a+=1}),document.getElementById("finishButton").addEventListener("click",function(){c.forEach(i=>{let o=document.getElementsByName(i.title);o.forEach(s=>{s.checked&&(l[i.title]||(l[i.title]={}),l[i.title][s.value]||(l[i.title][s.value]=0),l[i.title][s.value]++)}),o.forEach(s=>{s.checked=!1})});let e=`Title;Response;Count
`;Object.keys(l).forEach(i=>{Object.keys(l[i]).forEach(o=>{e+=`${i};${o};${l[i][o]}
`})});let t=new Blob([e],{encoding:"UTF-8",type:"text/csv"}),n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download=document.getElementById("fileName").value+".csv",n.click(),document.getElementById("nbSaissi").innerHTML=a=0})}function m(c,r){let l="";for(let e=0;e<c.length;e++)l+=`<a class="nav-link" id="${c[e]}">${c[e]}</a>`;document.getElementById("nav").innerHTML=l;for(let e=0;e<c.length;e++)document.getElementById(c[e]).addEventListener("click",function(){h(r.get(c[e]))})}var d=["Questionnaire élève AAC collège","Questionnaire élève AAC lycée","Questionnaire élève CAPO","Questionnaire élève CM2"],v=f(d);m(d,v);
